package project.transito.controller;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;

import org.springframework.web.bind.annotation.CrossOrigin;
import org.springframework.web.bind.annotation.DeleteMapping;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.PutMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RestController;

import project.transito.models.AgenteTransito;
import project.transito.models.Via;
import project.transito.service.AgenteTransitoService;
import project.transito.service.ViaService;

@RestController
@CrossOrigin(origins="http://localhost:4200")
public class Controller {
	
	
	@Autowired
	public ViaService viaService;
	
	@Autowired
	public AgenteTransitoService agenteTransitoService;

	
	//--- metodos de agentes de transito---//
	@PostMapping("/addAgente")
	public boolean addAgente( @RequestBody AgenteTransito agenteTransito)
	{	
		boolean validar =false;
		if(validateCodeT(agenteTransito.getCodigoTransito())==null)

		{
			 agenteTransitoService.add(agenteTransito);
			 validar=true;
		}
		
		return validar
		
	
		
	}
	
	@DeleteMapping("/deleteAgente/{codigo}")
	public boolean deleteAgente(AgenteTransito agenteTransito)
	{
		return agenteTransitoService.delete(agenteTransito.getCodigo());
	}
	@PutMapping("/updateAgente")
	public boolean updateAgente(@RequestBody AgenteTransito agenteTransito)
	{
		return agenteTransitoService.update(agenteTransito);
	}
	@GetMapping("/searchAgente/{codigo}")
	public AgenteTransito searchAgente(AgenteTransito agenteTransito2)
	{
		
		return agenteTransitoService.search(agenteTransito2.getCodigo());
	}
	
	@GetMapping("/listAgente")
	public List<AgenteTransito> listAgente()
	{
		return agenteTransitoService.list();
	}
	
	
	public AgenteTransito validateCodeT (String codigoTransito)
	{
		return agenteTransitoService.validateCodeT(codigoTransito);
	}
	
	
	//---metodos de via-----//
	
	
	@PostMapping("/addVia")
	public boolean addVia(@RequestBody Via via)
	{
			
		return viaService.add(via);
	}
	
	@DeleteMapping("/deleteVia/{identificador}")
	public boolean deleteVia(Via via)
	{
		
		return viaService.delete(via.getIdentificador());
	}
	@PutMapping("/updateVia")
	public boolean updateVia(@RequestBody Via via)
	{
		
		return viaService.update(via);
	}
	@GetMapping("/searchVia/{identificador}")
	public Via searchVia(Via via)
	{
		
		return viaService.search(via.getIdentificador());
	}
	
	@GetMapping("/listVia")
	public List<Via> listVia()
	{
		
		return viaService.list();
	}
	
	@GetMapping("/listViaApta")
	public List<Via> listViaApta()
	{
		return viaService.listViaApto();
		
	}
	

}
